<%= form_for(@student) do |f| %>
  <% if @student.errors.any? %>
    <div id="error_explanation">
      <h2><%= pluralize(@student.errors.count, "error") %> prohibited this student from being saved:</h2>

      <ul>
      <% @student.errors.full_messages.each do |message| %>
        <li><%= message %></li>
      <% end %>
      </ul>
    </div>
  <% end %>
  <div class="row">
    <div class="col-sm-4">
        <label for="student_student_id">Autogenerated ID</label>
        <input class="form-control" type="text" name="student[student_id]" id="student_student_id" value="<%= params[:id] ? @student.student_id : @student_id %>">
    </div>
    <div class="col-sm-2">
      <label for="year_level_id">Grade / Year Level</label>
      <%= select("year_level", "id", YearLevel.all.collect {|s| [s.description, s.id]}, {:selected => params[:id] ? begin @student_year_section.year_level_id rescue raise "No Year Level specified" end : 0}, :class => "form-control")%>
    </div>
    <div class="col-sm-2">
      <label for="student_other_info_section">Section</label>
      <%= select("section", "id", Section.all.collect {|s| [s.description, s.id]}, {:selected => params[:id] ? begin @student_year_section.section_id rescue raise "No Section specified" end : 0}, :class => "form-control")%>
    </div>
    <div class="col-sm-2">
      <%= f.label :status %>
      <select id="student_status" class="form-control" name="student[status]">
        <option>Active</option>
        <option>Inactive</option>
      </select>
    </div>
  </div>
  <div class="row">
    <div class="col-sm-4">
        <%= f.label "First Name" %>
        <%= f.text_field :fname, class: "form-control", :required => true %>
    </div>
    <div class="col-sm-4">
        <%= f.label "Middle Name" %>
        <%= f.text_field :mname, class: "form-control" %>
    </div>
    <div class="col-sm-4">
        <%= f.label "Last Name" %>
        <%= f.text_field :lname, class: "form-control", :required => true %>
    </div>
  </div>
  <div class="row">
    <div class="col-sm-4">
      <%= f.label :birthdate %>
      <%= f.date_field :birthdate, class: "form-control", :required => true %>
    </div>
    <div class="col-sm-4">
      <%= f.label :gender %>
      <select class="form-control" name="student[gender]">
        <option>Male</option>
        <option>Female</option>
      </select>
    </div>
  </div>
  <div class="row">
    <div class="col-sm-4">
      <%= f.label :contact_1 %>
      <%= f.text_field :contact_1, class: "form-control", :maxlength => 11, :required => true %>
    </div>
    <div class="col-sm-4">
      <%= f.label :contact_2 %>
      <%= f.text_field :contact_2, class: "form-control", :maxlength => 11 %>
    </div>
  </div>
  <div class="row">
    <div class="col-sm-6">
      <%= f.label :address_1 %>
      <%= f.text_field :address_1, class: "form-control", :required => true %>
    </div>
    <div class="col-sm-6">
      <%= f.label :address_2 %>
      <%= f.text_field :address_2, class: "form-control" %>
    </div>
  </div>
  <div class="row">
    <div class="col-sm-6">
      <%= f.label :username %>
      <input class="form-control" type="text" name="user[user_name]" id="user_user_name" value="<%= @user.user_name %>" required>
    </div>
    <div class="col-sm-6">
      <%= f.label :password %>
      <input class="form-control" type="text" name="user[user_pass]" id="user_user_pass" value="<%= @user.user_pass %>">
      <input class="form-control" type="hidden" name="user[access]" value="3">
      <input class="form-control" type="hidden" name="user[status]" id="user_status" value="Active">
    </div>
  </div>
  <div class="row" id="div-btn-save">
    <div class="col-sm-12">
      <button class="btn btn-primary" type="submit">
        <span class="glyphicon glyphicon-saved"></span> Save
      </button>
    </div>
  </div>
<% end %>
<script>
  $(document).ready(function(){
    $("#student_status").change(function() {
      var status = $("#student_status option:selected").val();
      $("#user_status").val(status);
    });
  });
</script>